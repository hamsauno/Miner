<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="css/bg.css">
  <script src="js/fullscr.js" defer></script>
  <script src="js/nozoom.js" defer></script>
</head>
<body class="bg-white text-black font-[Arial]">
<!-- Блок высотой 140px -->
<div class="w-full bg-[#E2E2E2] text-black text-xs sm:text-sm px-4 py-2 overflow-y-auto flex flex-col justify-between" style="height: 140px;">
    <div class="space-y-2 leading-relaxed">
      <div class="grid grid-cols-[auto,1fr] gap-2">
        <p class="text-right"><strong>Офис :</strong></p>
        <p>
          <button class="underline hover:text-blue-600 text-left" onclick="openMap('https://yandex.ru/maps/org/waymorr/39016942329/?ll=37.576007%2C55.772289&z=17.12')">
            Электрический переулок, 3/10с1
          </button>
        </p>
      </div>
  
      <div class="grid grid-cols-[auto,1fr] gap-2">
        <p class="text-right"><strong>Склад :</strong></p>
        <p>
          <button class="underline hover:text-blue-600 text-left" onclick="openMap('https://yandex.ru/maps/213/moscow/house/krasnokazarmennaya_ulitsa_12s38/Z04YcQdgQUUGQFtvfXt0d31hZw==/?ll=37.700801%2C55.756123&z=17.12')">
            Красноказарменная улица, 12с38
          </button>
        </p>
      </div>
  
      <div class="grid grid-cols-[auto,1fr] gap-2">
        <p class="text-right"><strong>Телефон :</strong></p>
        <p>
          <a href="tel:+74951297535" class="underline hover:text-blue-600" target="_blank" rel="noopener noreferrer">+7 (495) 129-75-35</a>
        </p>
      </div>
    </div>
  
<!-- Кнопка "Заказать звонок" -->
<div class="w-full text-center">
    <a id="callOrderBtn"
       href="#"
       class="mt-2 block text-center bg-[#2511A8] text-white text-base font-semibold py-2 w-full">
      Заказать звонок
    </a>
  </div>
  
  <!-- Модальное окно -->
  <div id="modalOverlay" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden">
    <div class="absolute bottom-0 left-0 w-full bg-[#E2E2E2] p-4 box-border rounded-t-lg">
      <h2 class="text-base font-semibold mb-2">Введите номер телефона</h2>
      <div class="flex items-center space-x-2 mb-2">
        <span class="text-lg font-bold">+7</span>
        <input type="tel"
               inputmode="numeric"
               id="userPhone"
               class="w-full px-2 py-1 border text-sm rounded"
               placeholder="999-222-55-77"
               pattern="[0-9\-]*"
               maxlength="13"
               autocomplete="tel"
               required />
      </div>
      <div class="flex justify-between space-x-2">
        <button id="cancelBtn" class="bg-[#2511A8] text-white px-4 py-1 w-1/2 text-sm rounded">Отменить</button>
        <button id="submitBtn" class="bg-[#2511A8] text-white px-4 py-1 w-1/2 text-sm rounded">Отправить</button>
      </div>
    </div>
  </div>
  
  <script>
    const callOrderBtn = document.getElementById('callOrderBtn');
    const modalOverlay = document.getElementById('modalOverlay');
    const cancelBtn = document.getElementById('cancelBtn');
    const submitBtn = document.getElementById('submitBtn');
    const userPhone = document.getElementById('userPhone');
  
    // Показать модальное окно
    callOrderBtn.addEventListener('click', (e) => {
      e.preventDefault();
      modalOverlay.classList.remove('hidden');
      userPhone.focus();
      console.log('Модальное окно открыто');
    });
  
    // Закрыть окно
    cancelBtn.addEventListener('click', () => {
      modalOverlay.classList.add('hidden');
      console.log('Модальное окно закрыто пользователем (Отмена)');
      userPhone.value = '';
    });
  
    // Маска номера
    userPhone.addEventListener('input', (e) => {
      let value = e.target.value.replace(/\D/g, '');
      if (value.length > 10) value = value.slice(0, 10);
  
      let formatted = '';
      if (value.length > 6) {
        formatted = value.slice(0, 3) + '-' + value.slice(3, 6) + '-' + value.slice(6);
      } else if (value.length > 3) {
        formatted = value.slice(0, 3) + '-' + value.slice(3);
      } else {
        formatted = value;
      }
  
      e.target.value = formatted;
    });
  
    // Отправка номера
    submitBtn.addEventListener('click', () => {
      const raw = userPhone.value.replace(/\D/g, '');
      if (raw.length === 10) {
        const message = `POZVONI_MNE_${raw}`;
        const url = `https://t.me/WAYMORR_BOT?start=${message}`;
        console.log('Отправка сообщения:', message);
        console.log('Переход по ссылке:', url);
        window.location.href = url;
      } else {
        console.warn('Неверный номер телефона. Ожидается 10 цифр.');
        alert('Введите корректный номер телефона (10 цифр).');
      }
    });
  
    // Прокрутка, чтобы инпут был над клавиатурой
    userPhone.addEventListener('focus', () => {
      setTimeout(() => {
        userPhone.scrollIntoView({ behavior: 'smooth', block: 'center' });
        console.log('Фокус на поле ввода телефона');
      }, 300);
    });
  </script>


  
  
  <script>
    function openMap(url) {
      if (window.Telegram && Telegram.WebApp) {
        Telegram.WebApp.openLink(url);
      } else {
        window.open(url, '_blank');
      }
    }
  </script>
</body>
</html>

