<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Калькулятор</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; text-align: left; }
        input, label, button { display: block; margin: 5px 0; }
        button { padding: 10px 20px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>Калькулятор доходности ASIC (SHA-256)</h1>
    <label>Хэшрейт (TH/s): <input type="number" id="hashrate" value="100" step="0.1"></label>
    <label>Энергопотребление (Вт): <input type="number" id="power" value="3000"></label>
    <label>Стоимость электричества (руб/кВт⋅ч): <input type="number" id="electricityCost" value="5"></label>
    <label>Стоимость оборудования (руб): <input type="number" id="asicCost" value="500000"></label>
    <label>Курс BTC (руб): <input type="number" id="btcPrice" value="5000000" readonly></label>
    <label>Курс USDT (руб): <input type="number" id="usdtPrice" value="90" readonly></label>
    <label>Доходность 1 TH/s в BTC/день: <input type="number" id="profitPerTH" value="0.00002" step="0.000001" readonly></label>
    <button onclick="calculateProfit()">Рассчитать</button>
    
    <h2>Результаты</h2>
    <p>Доход без учёта электричества: <span id="income"></span> USDT/день, <span id="incomeMonth"></span> USDT/месяц, <span id="incomeYear"></span> USDT/год</p>
    <p>Прибыль с учётом электричества: <span id="profit"></span> USDT/день, <span id="profitMonth"></span> USDT/месяц, <span id="profitYear"></span> USDT/год</p>
    <p>Процент годовых: <span id="roi"></span>%</p>
    <p>Окупаемость: <span id="payback"></span> дней</p>
    
    <script>
        async function fetchBTCPrice() {
            try {
                let response = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=rub');
                let data = await response.json();
                document.getElementById("btcPrice").value = data.bitcoin.rub;
            } catch (error) {
                console.error("Ошибка загрузки курса BTC:", error);
            }
        }
        
        async function fetchUSDTPrice() {
            try {
                let response = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=tether&vs_currencies=rub');
                let data = await response.json();
                document.getElementById("usdtPrice").value = data.tether.rub;
            } catch (error) {
                console.error("Ошибка загрузки курса USDT:", error);
            }
        }
        
        async function fetchProfitPerTH() {
            try {
                let response = await fetch('https://api.braiins.com/v1/pool/stats');
                let data = await response.json();
                let profitPerTH = data.payout_btc_per_th_day;
                document.getElementById("profitPerTH").value = profitPerTH;
            } catch (error) {
                console.error("Ошибка загрузки доходности 1 TH/s:", error);
            }
        }
        
        function calculateProfit() {
            let hashrate = parseFloat(document.getElementById("hashrate").value);
            let power = parseFloat(document.getElementById("power").value);
            let electricityCost = parseFloat(document.getElementById("electricityCost").value);
            let asicCost = parseFloat(document.getElementById("asicCost").value);
            let btcPrice = parseFloat(document.getElementById("btcPrice").value);
            let usdtPrice = parseFloat(document.getElementById("usdtPrice").value);
            let profitPerTH = parseFloat(document.getElementById("profitPerTH").value);
            
            let dailyIncome = (hashrate * profitPerTH * btcPrice) / usdtPrice;
            let monthlyIncome = dailyIncome * 30;
            let yearlyIncome = dailyIncome * 365;
            
            let dailyElectricityCost = ((power / 1000) * electricityCost * 24) / usdtPrice;
            let monthlyElectricityCost = dailyElectricityCost * 30;
            let yearlyElectricityCost = dailyElectricityCost * 365;
            
            let dailyProfit = dailyIncome - dailyElectricityCost;
            let monthlyProfit = monthlyIncome - monthlyElectricityCost;
            let yearlyProfit = yearlyIncome - yearlyElectricityCost;
            
            let roi = (yearlyProfit / (asicCost / usdtPrice)) * 100;
            let payback = (asicCost / usdtPrice) / dailyProfit;
            
            document.getElementById("income").innerText = dailyIncome.toFixed(2);
            document.getElementById("incomeMonth").innerText = monthlyIncome.toFixed(2);
            document.getElementById("incomeYear").innerText = yearlyIncome.toFixed(2);
            document.getElementById("profit").innerText = dailyProfit.toFixed(2);
            document.getElementById("profitMonth").innerText = monthlyProfit.toFixed(2);
            document.getElementById("profitYear").innerText = yearlyProfit.toFixed(2);
            document.getElementById("roi").innerText = roi.toFixed(2);
            document.getElementById("payback").innerText = payback.toFixed(0);
        }
        
        fetchBTCPrice();
        fetchUSDTPrice();
        fetchProfitPerTH();
    </script>
</body>
</html>
